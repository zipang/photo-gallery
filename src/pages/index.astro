---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// Load all gallery collections
const galleries = await getCollection("galleries");

// Filter to get only top-level galleries (those without '/')
// const topLevelGalleries = allGalleries.filter((gallery) => !gallery.id.includes("/"));
---

<BaseLayout title="Photo Gallery">
	<div class="page-content">
		<h1>Photo Gallery</h1>
		<p>Welcome to the photo gallery. Browse through the available collections.</p>

		<div class="gallery-list">
			{
				galleries.map((gallery) => (
					<div class="gallery-item">
						<a href={`galleries/${gallery.data.path}`} class="gallery-link">
							<h2>{gallery.data.name}</h2>
							<p>{gallery.data.medias.length} media files</p>
						</a>
					</div>
				))
			}
		</div>
	</div>
</BaseLayout>

<style>
	.page-content {
		padding: var(--spacing-lg) 0;
	}

	.gallery-list {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
		gap: var(--spacing-md);
		margin-top: var(--spacing-lg);
	}

	.gallery-item {
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: var(--border-radius);
		padding: var(--spacing-md);
		transition: var(--transition);
	}

	.gallery-item:hover {
		transform: translateY(-2px);
		box-shadow: var(--shadow-md);
		border-color: var(--color-primary);
	}

	.gallery-link {
		text-decoration: none;
		color: inherit;
		display: block;
	}

	.gallery-link h2 {
		margin: 0 0 var(--spacing-sm) 0;
		color: var(--color-primary);
	}

	.gallery-link p {
		margin: 0;
		color: var(--color-text-secondary);
		font-size: var(--font-size-small);
	}
</style>
