---
import Vignette from "./Vignette.astro";
import type { GalleryInfo } from "@lib/types";
import { Gallery } from "@lib/Gallery";

interface Props {
	gallery: GalleryInfo;
}

const gallery = new Gallery(Astro.props.gallery);
---

<div class="gallery-view">
	<div class="gallery-header">
		<h2>{gallery.name}</h2>
	</div>

	<div class="gallery-grid">
		{
			gallery.medias.map((media) => (
				<Vignette
					displayName={media.displayName}
					imageUrl={media.vignetteUrl}
					fullSizeUrl={media.fullSizeUrl}
				/>
			))
		}
	</div>
</div>

<style>
	.gallery-view {
		margin-top: var(--spacing-lg);
	}

	.gallery-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: var(--spacing-md);
		padding-bottom: var(--spacing-sm);
		border-bottom: 1px solid var(--color-border);
	}

	.gallery-count {
		color: var(--color-text-secondary);
		font-size: var(--font-size-small);
	}

	.gallery-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
		gap: var(--spacing-md);
		margin-top: var(--spacing-md);
	}

	@media (max-width: 768px) {
		.gallery-grid {
			grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
			gap: var(--spacing-sm);
		}
	}
</style>
