---
interface Props {
	media: Media;
}

const {
	displayName,
	vignetteUrl,
	orientation,
	width,
	height,
	border = 10,
	borderColor = "var(--color-border)",
	fullSizeUrl,
} = Astro.props.media;
---

<a href={fullSizeUrl} class="vignette-link" data-lightbox="gallery">
	<div class="vignette center-content">
		<img
			src={vignetteUrl}
			alt={displayName}
			class={`vignette-image ${orientation}`}
			width={width}
			height={height}
			style={border > 0 ? `border: ${border}px solid ${borderColor}` : ""}
		/>
		<div class="vignette-overlay">
			<span class="vignette-label">{displayName}</span>
		</div>
	</div>
</a>

<style>
	.vignette {
		position: relative;
		width: 180px;
		height: 180px;
		overflow: hidden;
	}

	.vignette-link {
		display: block;
		position: relative;
	}

	.vignette-image {
		width: 100%;
		height: 100%;
		&.portrait {
			width: auto;
		}
		&.landscape {
			height: auto;
		}
		margin: 0 auto;
		display: block;
		box-shadow: var(--shadow-sm);
		transition: var(--transition);

		&:hover {
			box-shadow: var(--shadow-md);
		}
	}

	.vignette-overlay {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
		padding: var(--spacing-sm);
		opacity: 0;
		transition: var(--transition);
	}

	.vignette:hover .vignette-overlay {
		opacity: 1;
	}

	.vignette-label {
		color: white;
		font-size: var(--font-size-small);
		font-weight: 500;
		text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
	}
</style>
